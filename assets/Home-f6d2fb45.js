import{d as E,u as I,r,w as T,o as j,a as B,b as L,c as i,e as t,F as M,f as R,g as m,h as $,i as d,t as l,j as g,k as D,p as H,l as N,_ as V}from"./index-e7f59ff6.js";import{g as b,a as A,D as F}from"./datetime-63f350e6.js";const x=u=>(H("data-v-bbe20f79"),u=u(),N(),u),O={class:"row-item"},z=x(()=>t("h1",{class:"px-3 text-4xl font-bold"},"Top",-1)),U={class:"w-full flex flex-col shrink-0 gap-y-[1rem] gap-x-[1rem] rounded-lg"},Y=["onClick"],q={class:"flex flex-col"},G={class:"sm:text-xl font-bold"},J={class:"text-sm"},K={class:"capitalize font-semibold"},Q={class:"text-sm"},W={key:0},X={class:"flex w-full justify-between items-center"},Z={class:"flex justify-end"},ee={key:0,class:"flex flex-col justify-center items-center gap-y-[1rem]"},te=x(()=>t("h1",{class:"text-2xl font-bold text-black"}," You have reached the end. ",-1)),se=E({__name:"Home",setup(u){const y=$(),n=I(),a=r([]),f=r([]),c=r(null),_=r(!1),p=r(!0),w=()=>{window.location.reload()},h=new IntersectionObserver(e=>{e.forEach(o=>{o.intersectionRatio>0&&(h.unobserve(o.target),k())})},{threshold:1}),v=()=>{var o;const e=(o=c.value.children[0].lastElementChild)==null?void 0:o.lastElementChild;console.log(e),e&&h.observe(e)},k=async()=>{if(!(p.value||_.value))if(a.value.length<f.value.length){let e=f.value.slice(a.value.length,a.value.length+10);for(const o of e){const s=await b(o);a.value.push(s)}v()}else _.value=!0};let P=T(a.value,e=>{e.length>0&&(n.$patch({displayLoading:!1}),P())},{immediate:!0});j(async()=>{let e=await A();f.value=e,e=e.slice(0,10);for(const o of e){const s=await b(o);a.value.push(s)}p.value=!1,v()}),B(()=>{n.setScrollElement(c.value)}),L(()=>{n.setScrollElement(c.value),a.value.length>0&&(n.$patch({displayLoading:!1}),c.value.scrollTop=n.scrollPosition)});const S=e=>{n.$patch({scrollPosition:c.value.scrollTop}),y.push({name:"Article",params:{id:e}})};return(e,o)=>(d(),i("div",{ref_key:"scrollPage",ref:c,class:"page overflow-x-auto"},[t("div",O,[z,t("div",U,[(d(!0),i(M,null,R(a.value,(s,C)=>(d(),i("div",{class:"item-card",onClick:oe=>S(s.id)},[t("div",q,[t("h1",G,l(s.title),1),t("p",J,[t("span",K,l(s.type),1),g(" by "+l(s.by),1)]),t("p",Q,[g(" ‚≠ê "+l(s.score)+" ",1),s.descendants?(d(),i("span",W,"| "+l(s.descendants)+" üí¨",1)):m("",!0)])]),t("div",X,[t("p",{ref_for:!0,ref:"timeref"},l(D(F).fromSeconds(s.time).toRelative()),513),t("p",Z,l(C+1),1)])],8,Y))),256)),_.value?(d(),i("div",ee,[te,t("button",{onClick:w,class:"p-[1rem] w-[8rem] bg-black bg-opacity-25 rounded-md font-bold"}," Reload ")])):m("",!0)])])],512))}});const ne=V(se,[["__scopeId","data-v-bbe20f79"]]);export{ne as default};
