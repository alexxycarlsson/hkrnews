import{d as I,m as N,n as C,i as c,c as i,e as t,t as n,k as h,F as j,f as B,q as D,_ as F,r as f,u as R,b as V,j as S,g as P,s as q}from"./index-e7f59ff6.js";import{D as L,g as $}from"./datetime-63f350e6.js";const E={class:"pl-4 flex flex-col gap-y-4"},H={class:"flex w-full justify-between items-center"},M={class:"font-semibold text-lg"},z={class:"text-sm ml-2"},O=["innerHTML"],G=I({__name:"TreeItem",props:{model:{type:Object,required:!0}},setup(x){const r=x,e=N(()=>r.model.children||[]);return(m,p)=>{const v=C("TreeItem",!0);return c(),i("li",E,[t("div",H,[t("h4",M,n(r.model.by)+":",1),t("p",z,n(h(L).fromSeconds(r.model.time).toRelative()),1)]),t("div",{innerHTML:r.model.text,class:"htmltext"},null,8,O),t("ul",null,[(c(!0),i(j,null,B(h(e),l=>(c(),D(v,{key:l.id,model:l},null,8,["model"]))),128))])])}}});const J=F(G,[["__scopeId","data-v-0948901f"]]),K={class:"flex flex-col"},Q=["href"],U={class:"text-sm"},W={class:"capitalize font-semibold"},X={class:"text-sm"},Y={key:0},Z={class:"flex w-full justify-between items-center"},ee={key:0,class:"flex flex-col gap-y-4 mt-4"},oe=I({__name:"Article",setup(x){const r=q(),e=f(),m=f(null),p=R(),v=N(()=>{if(e.value)return L.fromSeconds(e.value.time).toRelative()}),l=f({});async function y(d){for(const a of d){const s=await $(a);if(s.deleted||s.dead)return;l.value[a]=s,s.kids&&await y(s.kids)}}const u=f([]);function A(){var d;for(const a in l.value)if(l.value[a].parent===((d=e.value)==null?void 0:d.id))u.value.push(l.value[a]);else{const s=o=>{if(l.value[a].parent===o.id)o.children||(o.children=[]),o.children.push(l.value[a]);else if(o.children)for(const _ of o.children)s(_)};for(const o of u.value)s(o)}}return V(async()=>{e.value=await $(Number(r.params.id)),p.$patch({displayLoading:!1,showNavbar:!0}),e.value.kids&&(l.value={},u.value=[],await y(e.value.kids),A()),p.setScrollElement(m.value)}),(d,a)=>{var s,o,_,b,g,k,T;return c(),i("div",{ref_key:"scrollPage",ref:m,class:"page overflow-y-auto"},[t("div",K,[t("a",{href:(s=e.value)==null?void 0:s.url,target:"_blank",rel:"noopener noreferrer",class:"text-2xl font-semibold self-start"},n((o=e.value)==null?void 0:o.title),9,Q),t("p",U,[t("span",W,n((_=e.value)==null?void 0:_.type),1),S(" by "+n((b=e.value)==null?void 0:b.by),1)]),t("p",X,[S(" ⭐ "+n((g=e.value)==null?void 0:g.score)+" ",1),(k=e.value)!=null&&k.descendants?(c(),i("span",Y,"| "+n(e.value.descendants)+" 💬",1)):P("",!0)])]),t("div",Z,[t("p",{ref:"timeref"},n(h(v)),513)]),(T=e.value)!=null&&T.kids?(c(),i("ul",ee,[(c(!0),i(j,null,B(u.value,w=>(c(),D(J,{class:"bg-black bg-opacity-25 p-4 rounded-md",key:w.id,model:w},null,8,["model"]))),128))])):P("",!0)],512)}}});export{oe as default};
